# Birthday Bot

Telegram-–±–æ—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–π —Å –¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏—è –∏ —Å–±–æ—Ä–∞ –¥–µ–Ω–µ–≥ –Ω–∞ –ø–æ–¥–∞—Ä–∫–∏ –≤ –∫–æ–º–∞–Ω–¥–µ.

## –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### 1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏ —Å –±–æ—Ç–æ–º (–∫–æ–º–∞–Ω–¥–∞ `/start`) –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–æ—Ü–µ—Å—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:

1. **–í–≤–æ–¥ –∏–º–µ–Ω–∏**
   - –ë–æ—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç —Å–≤–æ—ë –∏–º—è

2. **–í–≤–æ–¥ –¥–∞—Ç—ã —Ä–æ–∂–¥–µ–Ω–∏—è**
   - –ë–æ—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –≤–≤–µ—Å—Ç–∏ –¥–∞—Ç—É –≤ —Ñ–æ—Ä–º–∞—Ç–µ DD.MM.YYYY
   - –ü—Ä–∏ –Ω–µ–≤–µ—Ä–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ –±–æ—Ç –ø–æ–ø—Ä–æ—Å–∏—Ç –≤–≤–µ—Å—Ç–∏ –¥–∞—Ç—É –ø–æ–≤—Ç–æ—Ä–Ω–æ

3. **–ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞**
   - –ë–æ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∫–Ω–æ–ø–∫—É "üì± –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –Ω–æ–º–µ—Ä–æ–º —Ç–µ–ª–µ—Ñ–æ–Ω–∞"
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç—É –∫–Ω–æ–ø–∫—É –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–æ–º–µ—Ä–∞
   - –†—É—á–Ω–æ–π –≤–≤–æ–¥ –Ω–æ–º–µ—Ä–∞ –Ω–µ –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è
   - –ú–æ–∂–Ω–æ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏–º –Ω–æ–º–µ—Ä–æ–º —Ç–µ–ª–µ—Ñ–æ–Ω–∞
   - –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–æ–º–µ—Ä–∞ –∫–Ω–æ–ø–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è

4. **–í—ã–±–æ—Ä –∫–æ–º–∞–Ω–¥—ã**
   - –ë–æ—Ç –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –≤—ã–±—Ä–∞—Ç—å –∫–æ–º–∞–Ω–¥—É –∏–∑ —Å–ø–∏—Å–∫–∞ —á–µ—Ä–µ–∑ inline-–∫–Ω–æ–ø–∫–∏
   - –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –∫–æ–º–∞–Ω–¥—ã –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
   - –ë–æ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç —É—Å–ø–µ—à–Ω—É—é —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:**
- –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ Telegram
- –ò—Å–∫–ª—é—á–µ–Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–≤–æ–¥–∞ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –Ω–æ–º–µ—Ä–∞
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ—Ç —É–∫–∞–∑–∞—Ç—å —á—É–∂–æ–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞
- –í—Å–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ –±–∞–∑—É

### 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ —Å–ª–µ–¥—É—é—â–µ–º—É —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é (–≤—Ä–µ–º—è –º–æ—Å–∫–æ–≤—Å–∫–æ–µ):

#### –ó–∞ 3 –¥–Ω—è –¥–æ –¥–Ω—è —Ä–æ–∂–¥–µ–Ω–∏—è:
- **00:01** - –°–æ–∑–¥–∞–µ—Ç –∑–∞–¥–∞—á—É –≤ —Å–∏—Å—Ç–µ–º–µ –¥–ª—è –ø—Ä–µ–¥—Å—Ç–æ—è—â–µ–≥–æ –¥–Ω—è —Ä–æ–∂–¥–µ–Ω–∏—è
- **00:10** - –°–æ–∑–¥–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ —Å–±–æ—Ä –¥–µ–Ω–µ–≥ –¥–ª—è –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∫–æ–º–∞–Ω–¥—ã
- **08:00** - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É—á–∞—Å—Ç–Ω–∏–∫–∞–º –∫–æ–º–∞–Ω–¥—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–±–æ—Ä–µ –¥–µ–Ω–µ–≥:
  ```
  –ü—Ä–∏–≤–µ—Ç! –ß–µ—Ä–µ–∑ 3 –¥–Ω—è {–∏–º—è} –∏–∑ –∫–æ–º–∞–Ω–¥—ã {–∫–æ–º–∞–Ω–¥–∞} –ø—Ä–∞–∑–¥–Ω—É–µ—Ç –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è!
  –ü–µ—Ä–µ–≤–µ–¥–∏, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–≤–æ–π –≤–∫–ª–∞–¥ –≤ –ø–æ–¥–∞—Ä–æ–∫ –Ω–∞—à–µ–º—É –∫–æ–ª–ª–µ–≥–µ –ø–æ –Ω–æ–º–µ—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω–∞ {—Ç–µ–ª–µ—Ñ–æ–Ω —Ç–∏–º–ª–∏–¥–∞},
  –ø–æ–ª—É—á–∞—Ç–µ–ª—å {–∏–º—è —Ç–∏–º–ª–∏–¥–∞}.
  [–ö–Ω–æ–ø–∫–∞: –ì–æ—Ç–æ–≤–æ, –ø–µ—Ä–µ–≤–µ–ª]
  ```
- **08:05** - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Ç–∏–º–ª–∏–¥—É:
  ```
  {–∏–º—è} –ø—Ä–∞–∑–¥–Ω—É–µ—Ç –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è —á–µ—Ä–µ–∑ 3 –¥–Ω—è!
  –°–µ–π—á–∞—Å —Ç–µ–±–µ –Ω–∞—á–Ω—É—Ç –ø–æ—Å—Ç—É–ø–∞—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã –µ–º—É –Ω–∞ –ø–æ–¥–∞—Ä–æ–∫!
  –ù–µ –∑–∞–±—É–¥—å –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ!
  ```

#### –í –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è:
- **08:10** - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–º–µ–Ω–∏–Ω–Ω–∏–∫—É:
  ```
  –ü—Ä–∏–≤–µ—Ç! –°–µ–≥–æ–¥–Ω—è —Ç–≤–æ–π –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è –∏, –æ—Ç –∏–º–µ–Ω–∏ –≤—Å–µ–π –∫–æ–º–∞–Ω–¥—ã,
  —è –ø–æ–∑–¥—Ä–∞–≤–ª—è—é —Ç–µ–±—è —Å —ç—Ç–∏–º –∑–∞–º–µ—á–∞—Ç–µ–ª—å–Ω—ã–º –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–º!
  –ü—É—Å—Ç—å —Ç–µ–±–µ —Å–æ–ø—É—Ç—Å—Ç–≤—É—é—Ç —É—Å–ø–µ—Ö, —É–¥–∞—á–∞ –∏ –∑–¥–æ—Ä–æ–≤—å–µ!
  ```
- **09:00** - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ —Ç–∏–º–ª–∏–¥—É –æ –ø–µ—Ä–µ–≤–æ–¥–µ –ø–æ–¥–∞—Ä–∫–∞:
  ```
  –ü—Ä–∏–≤–µ—Ç! –ù—É–∂–Ω–æ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –ø–æ–¥–∞—Ä–æ–∫ –∏–º–µ–Ω–∏–Ω–Ω–∏–∫—É!
  –ü–æ–ª—É—á–∞—Ç–µ–ª—å {–∏–º—è}, –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ {—Ç–µ–ª–µ—Ñ–æ–Ω}
  [–ö–Ω–æ–ø–∫–∞: –ì–æ—Ç–æ–≤–æ, –ø–µ—Ä–µ–≤–µ–ª]
  ```

### 3. –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

#### –û–±—â–∏–µ –∫–æ–º–∞–Ω–¥—ã
- `/start` - –ù–∞—á–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- `/birthdays` - –ü–æ–∫–∞–∑–∞—Ç—å –¥–Ω–∏ —Ä–æ–∂–¥–µ–Ω–∏—è –≤ –±–ª–∏–∂–∞–π—à–∏–µ 30 –¥–Ω–µ–π (–¥–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ —Ç–∏–º–ª–∏–¥–∞–º)
- `/help` - –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥

#### –ö–æ–º–∞–Ω–¥—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- `/admin` - –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–¥–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º)

–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏:
1. **Gen tasks** - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–¥–∞—á –¥–ª—è –¥–Ω–µ–π —Ä–æ–∂–¥–µ–Ω–∏—è —á–µ—Ä–µ–∑ 3 –¥–Ω—è
2. **Gen actions** - –°–æ–∑–¥–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π –¥–ª—è –Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á
3. **Send members messages** - –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —É—á–∞—Å—Ç–Ω–∏–∫–∞–º –æ —Å–±–æ—Ä–µ –¥–µ–Ω–µ–≥
4. **Send teamlead notify** - –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Ç–∏–º–ª–∏–¥–∞–º –æ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö –¥–Ω—è—Ö —Ä–æ–∂–¥–µ–Ω–∏—è
5. **Send today birthday messages** - –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–π –∏–º–µ–Ω–∏–Ω–Ω–∏–∫–∞–º
6. **Send teamlead money message** - –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π —Ç–∏–º–ª–∏–¥–∞–º –æ –ø–µ—Ä–µ–≤–æ–¥–µ –ø–æ–¥–∞—Ä–∫–æ–≤

### 4. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

#### admins
- `id` - ID –∑–∞–ø–∏—Å–∏
- `telegram_chat_id` - ID —á–∞—Ç–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –≤ Telegram (UNIQUE)

#### teams
- `id` - ID –∫–æ–º–∞–Ω–¥—ã
- `name` - –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã
- `is_active` - –ê–∫—Ç–∏–≤–Ω–∞ –ª–∏ –∫–æ–º–∞–Ω–¥–∞

#### team_members
- `id` - ID —É—á–∞—Å—Ç–Ω–∏–∫–∞
- `name` - –ò–º—è —É—á–∞—Å—Ç–Ω–∏–∫–∞
- `birthday` - –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è
- `team_id` - ID –∫–æ–º–∞–Ω–¥—ã
- `phone_number` - –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞
- `telegram_chat_id` - ID —á–∞—Ç–∞ –≤ Telegram

#### teamleads
- `id` - ID –∑–∞–ø–∏—Å–∏
- `team_member_id` - ID —É—á–∞—Å—Ç–Ω–∏–∫–∞ (—Ç–∏–º–ª–∏–¥–∞)
- `team_id` - ID –∫–æ–º–∞–Ω–¥—ã
- `phone_number` - –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ —Ç–∏–º–ª–∏–¥–∞

#### year_tasks
- `id` - ID –∑–∞–¥–∞—á–∏
- `year` - –ì–æ–¥
- `team_member_id` - ID –∏–º–µ–Ω–∏–Ω–Ω–∏–∫–∞
- `is_members_notified` - –£–≤–µ–¥–æ–º–ª–µ–Ω—ã –ª–∏ —É—á–∞—Å—Ç–Ω–∏–∫–∏
- `is_teamlead_notified` - –£–≤–µ–¥–æ–º–ª–µ–Ω –ª–∏ —Ç–∏–º–ª–∏–¥
- `is_money_transfered` - –ü–µ—Ä–µ–≤–µ–¥–µ–Ω –ª–∏ –ø–æ–¥–∞—Ä–æ–∫

#### actions
- `id` - ID –¥–µ–π—Å—Ç–≤–∏—è
- `task_id` - ID –∑–∞–¥–∞—á–∏
- `team_member_id` - ID —É—á–∞—Å—Ç–Ω–∏–∫–∞
- `type` - –¢–∏–ø –¥–µ–π—Å—Ç–≤–∏—è ('request'/'payout')
- `is_done` - –í—ã–ø–æ–ª–Ω–µ–Ω–æ –ª–∏ –¥–µ–π—Å—Ç–≤–∏–µ

### 5. –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**:
   - –ö–æ–º–∞–Ω–¥–∞ `/birthdays` –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ —Ç–∏–º–ª–∏–¥–∞–º
   - –î–µ–π—Å—Ç–≤–∏—è —Ç–∏–ø–∞ 'request' –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω—ã –¥–ª—è –∏–º–µ–Ω–∏–Ω–Ω–∏–∫–∞
   - –í—Å–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∞—Ç–æ–º–∞—Ä–Ω–æ —á–µ—Ä–µ–∑ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

2. **–û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å**:
   - –í—Å–µ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
   - –ü—Ä–∏ –æ—à–∏–±–∫–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
   - –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è

3. **–í—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–æ–Ω—ã**:
   - –í—Å–µ –≤—Ä–µ–º—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –Ω–∞ –º–æ—Å–∫–æ–≤—Å–∫–∏–π —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å
   - –ö—Ä–æ–Ω—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è —Å—Ç—Ä–æ–≥–æ –ø–æ –º–æ—Å–∫–æ–≤—Å–∫–æ–º—É –≤—Ä–µ–º–µ–Ω–∏

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
```bash
psql -U postgres -f init_db.sql
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –°–æ–∑–¥–∞—Å—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö `birthdaybot`, –µ—Å–ª–∏ –æ–Ω–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- –°–æ–∑–¥–∞—Å—Ç —Å—Ö–µ–º—É `public`, –µ—Å–ª–∏ –æ–Ω–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- –°–æ–∑–¥–∞—Å—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã –≤ —Å—Ö–µ–º–µ `public`
- –ù–∞—Å—Ç—Ä–æ–∏—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ —Å–≤—è–∑–∏

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` —Å–æ —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º:
```env
DATABASE_URL=postgres://username:password@localhost:5432/birthdaybot?sslmode=disable
TELEGRAM_BOT_TOKEN=your_bot_token_here
```

### 3. –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –±–æ—Ç–∞

1. –°–æ–±–µ—Ä–∏—Ç–µ –±–æ—Ç–∞:
```bash
go build -o birthday-bot
```

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:
```bash
./birthday-bot
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

1. –°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º:
```bash
chmod +x check_bot.sh
```

2. –î–æ–±–∞–≤—å—Ç–µ –∑–∞–¥–∞—á—É –≤ crontab –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞–∂–¥—ã–π —á–∞—Å:
```bash
crontab -e
```

–î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É:
```
0 * * * * /path/to/check_bot.sh
```

–°–∫—Ä–∏–ø—Ç `check_bot.sh`:
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –∑–∞–ø—É—â–µ–Ω –ª–∏ –±–æ—Ç
- –ï—Å–ª–∏ –±–æ—Ç –Ω–µ –∑–∞–ø—É—â–µ–Ω, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –µ–≥–æ
- –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –ª–æ–≥–∏ –≤ —Ñ–∞–π–ª `bot.log`

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Go 1.19 –∏–ª–∏ –≤—ã—à–µ
- PostgreSQL 12 –∏–ª–∏ –≤—ã—à–µ
- –î–æ—Å—Ç—É–ø –∫ Telegram Bot API

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ (Ubuntu 22.04)

### 1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
```bash
ssh root@55.55.55.55
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
apt update && apt upgrade -y

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
apt install -y git postgresql postgresql-contrib golang-go

# –ó–∞–ø—É—Å–∫ –∏ –≤–∫–ª—é—á–µ–Ω–∏–µ PostgreSQL
systemctl start postgresql
systemctl enable postgresql
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è PostgreSQL
sudo -u postgres createuser --interactive
# –í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: birthdaybot
# –°–¥–µ–ª–∞—Ç—å —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º? n
# –†–∞–∑—Ä–µ—à–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –ë–î? y

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞—Ä–æ–ª—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
sudo -u postgres psql -c "ALTER USER birthdaybot WITH PASSWORD 'your_secure_password';"
```

### 4. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞–±–æ—á–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
mkdir -p /opt/birthday-bot
cd /opt/birthday-bot

# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone https://github.com/your-username/birthday-bot.git .

# –°–æ–∑–¥–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ .env —Ñ–∞–π–ª–∞
cat > .env << EOL
DATABASE_URL=postgres://birthdaybot:your_secure_password@localhost:5432/birthdaybot?sslmode=disable
TELEGRAM_BOT_TOKEN=your_bot_token_here
EOL

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∞–≤
chmod 600 .env
```

### 5. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ —Ç–∞–±–ª–∏—Ü
sudo -u postgres psql -f init_db.sql
```

### 6. –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –±–æ—Ç–∞
```bash
# –°–±–æ—Ä–∫–∞ –±–æ—Ç–∞
go build -o birthday-bot

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ —á–µ—Ä–µ–∑ systemd
cat > /etc/systemd/system/birthday-bot.service << EOL
[Unit]
Description=Birthday Bot Service
After=network.target postgresql.service

[Service]
Type=simple
User=root
WorkingDirectory=/opt/birthday-bot
Environment="DATABASE_URL=postgres://birthdaybot:your_secure_password@localhost:5432/birthdaybot?sslmode=disable"
Environment="TELEGRAM_BOT_TOKEN=your_bot_token_here"
ExecStart=/opt/birthday-bot/birthday-bot
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
EOL

# –í–ê–ñ–ù–û: –ó–∞–º–µ–Ω–∏—Ç–µ your_secure_password –Ω–∞ –ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è PostgreSQL
# –∏ your_bot_token_here –Ω–∞ —Ç–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ Telegram –±–æ—Ç–∞

# –í–∫–ª—é—á–µ–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞
systemctl daemon-reload
systemctl enable birthday-bot
systemctl start birthday-bot
```

### 7. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∞–≤ –Ω–∞ —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏
chmod +x check_bot.sh

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –≤ cron
(crontab -l 2>/dev/null; echo "0 * * * * /opt/birthday-bot/check_bot.sh") | crontab -
```

### 8. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –±–æ—Ç–∞
systemctl status birthday-bot

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
journalctl -u birthday-bot -f
```

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞

### 1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```bash
# –ü–µ—Ä–µ—Ö–æ–¥ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –±–æ—Ç–∞
cd /opt/birthday-bot

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ .env
cp .env .env.backup

# –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
git fetch origin
git reset --hard origin/main

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ .env
cp .env.backup .env

# –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –±–æ—Ç–∞
go build -o birthday-bot

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞
systemctl restart birthday-bot
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
systemctl status birthday-bot

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
journalctl -u birthday-bot -n 50
```

### 3. –û—Ç–∫–∞—Ç –≤ —Å–ª—É—á–∞–µ –ø—Ä–æ–±–ª–µ–º
```bash
# –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã, –º–æ–∂–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏
git reset --hard HEAD@{1}
go build -o birthday-bot
systemctl restart birthday-bot
```

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

1. –ò–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å root –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –≤—Ö–æ–¥–∞
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ SSH-–∫–ª—é—á–∏ –≤–º–µ—Å—Ç–æ –ø–∞—Ä–æ–ª—è
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ firewall (ufw):
```bash
ufw allow ssh
ufw allow postgresql
ufw enable
```
4. –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ —Å–∏—Å—Ç–µ–º—É:
```bash
apt update && apt upgrade -y
```

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º–∏

–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ SQL-–∑–∞–ø—Ä–æ—Å:
```sql
INSERT INTO admins (telegram_chat_id) VALUES (123456789);
```

–î–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:
```sql
DELETE FROM admins WHERE telegram_chat_id = 123456789;
```

–î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å–ø–∏—Å–∫–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:
```sql
SELECT * FROM admins;
```

## –ú–∏–≥—Ä–∞—Ü–∏–∏

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å –≤–µ—Ä—Å–∏–∏ 1.0 –¥–æ 1.1

–î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Å –≤–µ—Ä—Å–∏–∏ 1.0 –¥–æ 1.1 –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```bash
psql -U birthdaybot -d birthdaybot -f sql_migrations/v1_1_migration.sql
```

–≠—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏—è –¥–æ–±–∞–≤–ª—è–µ—Ç:
- –¢–∞–±–ª–∏—Ü—É `admins` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
- –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è birthdaybot